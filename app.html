<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My CPS Space</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg-dark: #0f172a; --card-dark: #1e293b; --neon-blue: #38bdf8; --neon-purple: #c084fc; --neon-green: #4ade80; }
        body { background-color: var(--bg-dark); color: #f1f5f9; font-family: 'Outfit', sans-serif; padding-bottom: 80px; }
        .hero-section { background: radial-gradient(circle at top right, rgba(192, 132, 252, 0.15), transparent 40%), radial-gradient(circle at top left, rgba(56, 189, 248, 0.15), transparent 40%); padding: 2rem 1.5rem; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .badge-code { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 0.5rem 1.2rem; border-radius: 50px; font-weight: 700; color: var(--neon-blue); box-shadow: 0 0 15px rgba(56, 189, 248, 0.3); }
        .card-stats, .card { background: var(--card-dark); border: 1px solid rgba(255,255,255,0.05); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); color: white; }
        .form-check-input { background-color: #334155; border-color: #475569; height: 1.5em; width: 3em; }
        .form-check-input:checked { background-color: var(--neon-green); border-color: var(--neon-green); box-shadow: 0 0 10px rgba(74, 222, 128, 0.5); }
        #access-denied .card { border: 1px solid rgba(239, 68, 68, 0.3); }
        
        /* Style de la Modale de Preuve */
        .modal-content { background-color: #1e293b; border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 20px; }
        .modal-header { border-bottom: 1px solid rgba(255,255,255,0.05); }
        .modal-footer { border-top: 1px solid rgba(255,255,255,0.05); }
        .form-control, .form-select { background-color: #0f172a; border: 1px solid #334155; color: white; border-radius: 10px; }
        .form-control:focus { background-color: #0f172a; color: white; border-color: var(--neon-purple); box-shadow: 0 0 0 0.25rem rgba(192, 132, 252, 0.25); }
        .star-rating { font-size: 1.5rem; color: #fbbf24; cursor: pointer; }
        .fade-in { animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="loader" class="text-center mt-5 pt-5">
    <div class="spinner-border text-info" role="status" style="width: 3rem; height: 3rem;"></div>
    <p class="mt-3 opacity-75">Chargement...</p>
</div>

<div id="access-denied" class="container mt-5 pt-5 text-center" style="display:none;">
    <div class="card p-5">
        <h3 class="mb-3 text-danger">â›” AccÃ¨s Restreint</h3>
        <p class="text-white-50">Ton profil n'est pas activÃ©.</p>
    </div>
</div>

<div id="dashboard-content" style="display:none;" class="fade-in">
    <div class="hero-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <span style="font-size: 1.2rem;">ðŸ‘‹ Hello !</span>
            <span id="code-eleve-display" class="badge-code">--</span>
        </div>
        <h1 class="display-6 fw-bold mb-0">Mon Parcours <span style="color:var(--neon-purple)">CPS</span></h1>
    </div>
    <div class="container mt-4">
        <div class="row g-4 justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card-stats p-3 text-center">
                    <h5 class="mb-4 text-white-50 text-start ps-2">ðŸ”¥ Mes Stats</h5>
                    <div style="position: relative; height: 300px;"><canvas id="radarChart"></canvas></div>
                </div>
            </div>
            <div class="col-md-8 col-lg-6">
                <h5 class="mb-3 ps-2 text-white-50">ðŸš€ Mes Objectifs</h5>
                <div id="actions-container" class="pb-5"></div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="proofModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">âœ¨ Valider une rÃ©ussite</h5>
                <button type="button" class="btn-close btn-close-white"
